{"ast":null,"code":"import _defineProperty from \"c:\\\\master1920\\\\projects_m1glsi\\\\pers\\\\ui-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"c:\\\\master1920\\\\projects_m1glsi\\\\pers\\\\ui-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"c:\\\\master1920\\\\projects_m1glsi\\\\pers\\\\ui-react\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"c:\\\\master1920\\\\projects_m1glsi\\\\pers\\\\ui-react\\\\src\\\\UserList.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  query usersPaginateQuery(\\n    $first: Int\\n    $offset: Int\\n    $orderBy: [_UserOrdering]\\n    $filter: _UserFilter\\n  ) {\\n    User(first: $first, offset: $offset, orderBy: $orderBy, filter: $filter) {\\n      id\\n      name\\n      avgStars\\n      numReviews\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\nimport \"./UserList.css\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { Table, TableBody, TableCell, TableHead, TableRow, Tooltip, Paper, TableSortLabel, Typography, TextField } from \"@material-ui/core\";\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      maxWidth: 700,\n      marginTop: theme.spacing(3),\n      overflowX: \"auto\",\n      margin: \"auto\"\n    },\n    table: {\n      minWidth: 700\n    },\n    textField: {\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n      minWidth: 300\n    }\n  };\n};\n\nvar GET_USER = gql(_templateObject());\n\nfunction UserList(props) {\n  var classes = props.classes;\n\n  var _React$useState = React.useState(\"asc\"),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      order = _React$useState2[0],\n      setOrder = _React$useState2[1];\n\n  var _React$useState3 = React.useState(\"name\"),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      orderBy = _React$useState4[0],\n      setOrderBy = _React$useState4[1];\n\n  var _React$useState5 = React.useState(0),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      page = _React$useState6[0],\n      setPage = _React$useState6[1];\n\n  var _React$useState7 = React.useState(10),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      rowsPerPage = _React$useState8[0],\n      setRowsPerPage = _React$useState8[1];\n\n  var _React$useState9 = React.useState({\n    usernameFilter: \"\"\n  }),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      filterState = _React$useState10[0],\n      setFilterState = _React$useState10[1];\n\n  var getFilter = function getFilter() {\n    return filterState.usernameFilter.length > 0 ? {\n      name_contains: filterState.usernameFilter\n    } : {};\n  };\n\n  var _useQuery = useQuery(GET_USER, {\n    variables: {\n      first: rowsPerPage,\n      offset: rowsPerPage * page,\n      orderBy: orderBy + \"_\" + order,\n      filter: getFilter()\n    }\n  }),\n      loading = _useQuery.loading,\n      data = _useQuery.data,\n      error = _useQuery.error;\n\n  var handleSortRequest = function handleSortRequest(property) {\n    var newOrderBy = property;\n    var newOrder = \"desc\";\n\n    if (orderBy === property && order === \"desc\") {\n      newOrder = \"asc\";\n    }\n\n    setOrder(newOrder);\n    setOrderBy(newOrderBy);\n  };\n\n  var handleFilterChange = function handleFilterChange(filterName) {\n    return function (event) {\n      var val = event.target.value;\n      setFilterState(function (oldFilterState) {\n        return _objectSpread({}, oldFilterState, _defineProperty({}, filterName, val));\n      });\n    };\n  };\n\n  return React.createElement(Paper, {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"h2\",\n    gutterBottom: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"User List\"), React.createElement(TextField, {\n    id: \"search\",\n    label: \"User Name Contains\",\n    className: classes.textField,\n    value: filterState.usernameFilter,\n    onChange: handleFilterChange(\"usernameFilter\"),\n    margin: \"normal\",\n    variant: \"outlined\",\n    type: \"text\",\n    InputProps: {\n      className: classes.input\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }), loading && !error && React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, \"Loading...\"), error && !loading && React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, \"Error\"), data && !loading && !error && React.createElement(Table, {\n    className: classes.table,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(TableHead, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    key: \"name\",\n    sortDirection: orderBy === \"name\" ? order : false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, React.createElement(Tooltip, {\n    title: \"Sort\",\n    placement: \"bottom-start\",\n    enterDelay: 300,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, React.createElement(TableSortLabel, {\n    active: orderBy === \"name\",\n    direction: order,\n    onClick: function onClick() {\n      return handleSortRequest(\"name\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, \"Name\"))), React.createElement(TableCell, {\n    key: \"avgStars\",\n    sortDirection: orderBy === \"avgStars\" ? order : false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(Tooltip, {\n    title: \"Sort\",\n    placement: \"bottom-end\",\n    enterDelay: 300,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(TableSortLabel, {\n    active: orderBy === \"avgStars\",\n    direction: order,\n    onClick: function onClick() {\n      return handleSortRequest(\"avgStars\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, \"Average Stars\"))), React.createElement(TableCell, {\n    key: \"numReviews\",\n    sortDirection: orderBy === \"numReviews\" ? order : false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, React.createElement(Tooltip, {\n    title: \"Sort\",\n    placement: \"bottom-start\",\n    enterDelay: 300,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, React.createElement(TableSortLabel, {\n    active: orderBy === \"numReviews\",\n    direction: order,\n    onClick: function onClick() {\n      return handleSortRequest(\"numReviews\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, \"Number of Reviews\"))))), React.createElement(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, data.User.map(function (n) {\n    return React.createElement(TableRow, {\n      key: n.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(TableCell, {\n      component: \"th\",\n      scope: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, n.name), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, n.avgStars ? n.avgStars.toFixed(2) : \"-\"), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, n.numReviews));\n  }))));\n}\n\nexport default withStyles(styles)(UserList);","map":{"version":3,"sources":["c:/master1920/projects_m1glsi/pers/ui-react/src/UserList.js"],"names":["React","useQuery","gql","withStyles","Table","TableBody","TableCell","TableHead","TableRow","Tooltip","Paper","TableSortLabel","Typography","TextField","styles","theme","root","maxWidth","marginTop","spacing","overflowX","margin","table","minWidth","textField","marginLeft","marginRight","GET_USER","UserList","props","classes","useState","order","setOrder","orderBy","setOrderBy","page","setPage","rowsPerPage","setRowsPerPage","usernameFilter","filterState","setFilterState","getFilter","length","name_contains","variables","first","offset","filter","loading","data","error","handleSortRequest","property","newOrderBy","newOrder","handleFilterChange","filterName","event","val","target","value","oldFilterState","className","input","User","map","n","id","name","avgStars","toFixed","numReviews"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\nimport \"./UserList.css\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableRow,\n  Tooltip,\n  Paper,\n  TableSortLabel,\n  Typography,\n  TextField\n} from \"@material-ui/core\";\n\nconst styles = theme => ({\n  root: {\n    maxWidth: 700,\n    marginTop: theme.spacing(3),\n    overflowX: \"auto\",\n    margin: \"auto\"\n  },\n  table: {\n    minWidth: 700\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    minWidth: 300\n  }\n});\n\nconst GET_USER = gql`\n  query usersPaginateQuery(\n    $first: Int\n    $offset: Int\n    $orderBy: [_UserOrdering]\n    $filter: _UserFilter\n  ) {\n    User(first: $first, offset: $offset, orderBy: $orderBy, filter: $filter) {\n      id\n      name\n      avgStars\n      numReviews\n    }\n  }\n`;\n\nfunction UserList(props) {\n  const { classes } = props;\n  const [order, setOrder] = React.useState(\"asc\");\n  const [orderBy, setOrderBy] = React.useState(\"name\");\n  const [page, setPage] = React.useState(0);\n  const [rowsPerPage, setRowsPerPage] = React.useState(10);\n  const [filterState, setFilterState] = React.useState({ usernameFilter: \"\" });\n\n  const getFilter = () => {\n    return filterState.usernameFilter.length > 0\n      ? { name_contains: filterState.usernameFilter }\n      : {};\n  };\n\n  const { loading, data, error } = useQuery(GET_USER, {\n    variables: {\n      first: rowsPerPage,\n      offset: rowsPerPage * page,\n      orderBy: orderBy + \"_\" + order,\n      filter: getFilter()\n    }\n  });\n\n  const handleSortRequest = property => {\n    const newOrderBy = property;\n    let newOrder = \"desc\";\n\n    if (orderBy === property && order === \"desc\") {\n      newOrder = \"asc\";\n    }\n\n    setOrder(newOrder);\n    setOrderBy(newOrderBy);\n  };\n\n  const handleFilterChange = filterName => event => {\n    const val = event.target.value;\n\n    setFilterState(oldFilterState => ({\n      ...oldFilterState,\n      [filterName]: val\n    }));\n  };\n\n  return (\n    <Paper className={classes.root}>\n      <Typography variant=\"h2\" gutterBottom>\n        User List\n      </Typography>\n      <TextField\n        id=\"search\"\n        label=\"User Name Contains\"\n        className={classes.textField}\n        value={filterState.usernameFilter}\n        onChange={handleFilterChange(\"usernameFilter\")}\n        margin=\"normal\"\n        variant=\"outlined\"\n        type=\"text\"\n        InputProps={{\n          className: classes.input\n        }}\n      />\n      {loading && !error && <p>Loading...</p>}\n      {error && !loading && <p>Error</p>}\n      {data && !loading && !error && (\n        <Table className={classes.table}>\n          <TableHead>\n            <TableRow>\n              <TableCell\n                key=\"name\"\n                sortDirection={orderBy === \"name\" ? order : false}\n              >\n                <Tooltip title=\"Sort\" placement=\"bottom-start\" enterDelay={300}>\n                  <TableSortLabel\n                    active={orderBy === \"name\"}\n                    direction={order}\n                    onClick={() => handleSortRequest(\"name\")}\n                  >\n                    Name\n                  </TableSortLabel>\n                </Tooltip>\n              </TableCell>\n              <TableCell\n                key=\"avgStars\"\n                sortDirection={orderBy === \"avgStars\" ? order : false}\n              >\n                <Tooltip title=\"Sort\" placement=\"bottom-end\" enterDelay={300}>\n                  <TableSortLabel\n                    active={orderBy === \"avgStars\"}\n                    direction={order}\n                    onClick={() => handleSortRequest(\"avgStars\")}\n                  >\n                    Average Stars\n                  </TableSortLabel>\n                </Tooltip>\n              </TableCell>\n              <TableCell\n                key=\"numReviews\"\n                sortDirection={orderBy === \"numReviews\" ? order : false}\n              >\n                <Tooltip title=\"Sort\" placement=\"bottom-start\" enterDelay={300}>\n                  <TableSortLabel\n                    active={orderBy === \"numReviews\"}\n                    direction={order}\n                    onClick={() => handleSortRequest(\"numReviews\")}\n                  >\n                    Number of Reviews\n                  </TableSortLabel>\n                </Tooltip>\n              </TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {data.User.map(n => {\n              return (\n                <TableRow key={n.id}>\n                  <TableCell component=\"th\" scope=\"row\">\n                    {n.name}\n                  </TableCell>\n                  <TableCell>\n                    {n.avgStars ? n.avgStars.toFixed(2) : \"-\"}\n                  </TableCell>\n                  <TableCell>{n.numReviews}</TableCell>\n                </TableRow>\n              );\n            })}\n          </TableBody>\n        </Table>\n      )}\n    </Paper>\n  );\n}\n\nexport default withStyles(styles)(UserList);\n"]},"metadata":{},"sourceType":"module"}